(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17fcbe22"],{"4e8e":function(e,t,i){"use strict";i.r(t);var c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"star-recycle"},[e.showAction?e._e():i("div",{staticClass:"search-box"},[i("div",{staticClass:"search-form"},[i("el-input",{attrs:{placeholder:"输入要搜索的平台"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(1)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){return e.getList(1)}},slot:"suffix"})])],1),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAction=!0}}},[e._v("批量操作")])],1),e.showAction?i("div",{staticClass:"search-box"},[i("div",{staticClass:"search-form"},[i("el-checkbox",{on:{change:e.handleCheckedAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),i("div",{staticClass:"margin"},[e._v("\n        批量选择"),i("span",{staticClass:"color-primary"},[e._v(e._s(e.checkList.length))]),e._v("个\n      ")]),i("el-button",{staticClass:"btn-action",on:{click:function(t){return e.handleList("recover")}}},[e._v("恢复")]),i("el-button",{staticClass:"btn-action",on:{click:function(t){return e.handleList("delete")}}},[e._v("删除")])],1),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAction=!1}}},[e._v("退出批量操作")])],1):e._e(),i("div",{staticClass:"recycle-list"},[i("el-checkbox-group",{on:{change:e.handleCheckedList},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[e._l(e.list,function(t,c){return[i("div",{key:c,staticClass:"recycle-item",on:{click:function(t){return e.changeItem(c)}}},[i("div",{staticClass:"recycle-item__box"},[i("div",{staticClass:"recycle-item__info"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.logo,expression:"item.logo"}],staticClass:"recycle-item__logo account-logo",attrs:{alt:""}}),i("div",{staticClass:"recycle-item__content "},[i("div",{staticClass:"recycle-item__name text-over"},[e._v(e._s(t.name))]),i("div",{staticClass:"recycle-item__desc text-over"},[e._v(e._s(t.type_name))])])]),e.showAction?i("div",{staticClass:"recycle-item__right"},[i("el-checkbox",{staticClass:"item",attrs:{label:String(c)}})],1):e._e(),i("div",{staticClass:"recycle-item__action"},[e.showAction?e._e():[i("el-popover",{attrs:{placement:"bottom","popper-class":"star-popover",trigger:"hover",content:"恢复"}},[i("i",{staticClass:"el-icon-refresh-right",attrs:{slot:"reference"},on:{click:function(i){return e.recoverItem(t)}},slot:"reference"})]),i("el-popover",{attrs:{placement:"bottom","popper-class":"star-popover",trigger:"hover",content:"删除"}},[i("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},on:{click:function(i){return e.deleteItem(t)}},slot:"reference"})])]],2)])])]})],2)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"recycle-list--empty"},[i("i",{staticClass:"el-icon-loading"}),e._v("\n      加载中\n  ")]),!e.loading&&e.finish&&e.page>2?i("div",{staticClass:"recycle-list--empty"},[e._v("\n      没有更多了\n  ")]):e._e()])},s=[],n=(i("ac6a"),i("456d"),{name:"starRecycle",props:{activeMenu:Object},data:function(){return{list:[],keyword:"",page:1,finish:!1,loading:!1,showAction:!1,checkAll:!1,checkList:[]}},methods:{scroll:function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.querySelector(".star-recycle").offsetHeight-e-window.innerHeight;t<200&&!this.finish&&!this.loading&&this.getList(this.page+1)},getList:function(e){var t=this;e&&(this.page=e),this.loading=!0,this.$http.get(this.activeMenu.apiurl,{params:{keyword:this.keyword,page:this.page}}).then(function(e){t.loading=!1,0!=e.list.length&&"1"!=t.activeMenu.one_page||(t.finish=!0),1==t.page&&(t.list=[]),t.list=t.list.concat(e.list)}).catch(function(){return[t.loading=!1]})},recoverItem:function(e){var t=this;this.$http.post("/index.php?c=account&a=recycle&do=recover",{uniacids:"string"===typeof e.uniacid?[e.uniacid]:e.uniacid}).then(function(e){t.$message({message:e||"修改成功",type:"success"}),t.checkList=[],t.checkAll=!1,t.getList(1)})},deleteItem:function(e){var t=this;this.$confirm("此为永久删除，系统将自动删除该账号下所有系统相关信息（包括但不限于粉丝信息）,确认现在删除吗？").then(function(){t.$http.post("/index.php?c=account&a=recycle&do=delete",{uniacids:"string"===typeof e.uniacid?[e.uniacid]:e.uniacid,acids:"string"===typeof e.acid?[e.acid]:e.acid}).then(function(e){t.$message({message:e||"修改成功",type:"success",duration:3e3}),t.checkList=[],t.checkAll=!1,t.getList(1)})})},changeItem:function(e){e=String(e),-1!==this.checkList.indexOf(e)?this.checkList.splice(this.checkList.indexOf(e),1):this.checkList.push(e),this.handleCheckedList()},handleCheckedList:function(){this.checkAll=this.checkList.length==this.list.length},handleCheckedAll:function(e){this.checkList=e?Object.keys(this.list):[]},handleList:function(e){var t={uniacid:[],acid:[]};for(var i in this.checkList)t.uniacid.push(this.list[this.checkList[i]].uniacid),t.acid.push(this.list[this.checkList[i]].acid);"delte"==e?this.deleteItem(t):this.recoverItem(t)}},mounted:function(){var e=this;this.getList(1),this.$nextTick(function(){document.addEventListener("scroll",e.scroll)})},beforeDestroy:function(){document.removeEventListener("scroll",this.scroll)}}),a=n,o=(i("af28"),i("2877")),l=Object(o["a"])(a,c,s,!1,null,null,null);t["default"]=l.exports},"766f":function(e,t,i){},af28:function(e,t,i){"use strict";var c=i("766f"),s=i.n(c);s.a}}]);