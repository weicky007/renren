{template '_header'}
<script src="https://cdn.bootcss.com/angular.js/1.6.9/angular.min.js"></script>
<script src="{MODULE_URL}/plugin/open_farm/static/web/js/base.js"></script>
<script src="{MODULE_URL}/plugin/open_farm/static/web/js/grade.js"></script>
<div class="page-header">
    当前位置：<span class="text-primary">等级设置</span>
</div>
<div class="page-content" ng-app="grade_app" ng-controller="grade_controller">
    <div class="alert alert-primary">
        <p>说明:</p>
        <p>1. 升级条件: 当用户经验值超过或等于当前等级内经验总数时升级 </p>
        <p>2. 升级之后经验值清零(如果经验值大于当前等级经验值则保持扣除升级所需经验值之后的经验) </p>
        <p>3. 添加等级时,若当前等级已存在则为更新当前等级数据,若不存在则为添加 </p>
    </div>
    <div class="box box-info">
        <form class="form-horizontal">
            <div class="box-body col-sm-11">
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="level">等级 :</label>
                    <div class="col-sm-10 input-group">
                        <input id="level" type="text" ng-model="data.grade_info.level" class="form-control" placeholder="请输入当前等级">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="experience">经验 :</label>
                    <div class="col-sm-10 input-group">
                        <input id="experience" type="text" ng-model="data.grade_info.experience" class="form-control" placeholder="请输入当前等级经验值">
                        <span class="input-group-addon">经验</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="accelerate">吃饲料加速百分比 :</label>
                    <div class="col-sm-10 input-group input-group">
                        <input id="accelerate" type="text" ng-model="data.grade_info.accelerate" class="form-control" placeholder="请输入当前等级吃饲料加速百分比">
                        <span class="input-group-addon">%</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="surprised_guard">彩蛋守护时间 :</label>
                    <div class="col-sm-10 input-group input-group">
                        <input id="surprised_guard" type="text" ng-model="data.grade_info.surprised_guard" class="form-control" placeholder="请输入当前等级彩蛋守护时间">
                        <span class="input-group-addon">小时</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <button type="button" style="text-align: center" class="btn btn-primary" ng-click="function.save_info();">添加</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div ng-show="data.table_show">
        <table class="table table-responsive table-hover text-center">
            <thead class="navbar-inner text-center">
                <tr>
                    <th class="text-center">等级</th>
                    <th class="text-center">等级内经验总数</th>
                    <th class="text-center">吃饲料加速百分比</th>
                    <th class="text-center">彩蛋守护时间</th>
                </tr>
            </thead>
            <tbody>
            <tr ng-repeat="(k, v) in data.grade_list.data">
                <td ng-bind="v.level"></td>
                <td>
                    <div class="col-sm-10 input-group input-group">
                        <input type="text" ng-model="v.experience" class="form-control" placeholder="请输入当前等级经验值">
                        <span class="input-group-addon">经验</span>
                    </div>
                </td>
                <td>
                    <div class="col-sm-10 input-group input-group">
                        <input type="text" ng-model="v.accelerate" class="form-control" placeholder="请输入吃饲料加速百分比">
                        <span class="input-group-addon">%</span>
                    </div>
                </td>
                <td>
                    <div class="col-sm-10 input-group input-group">
                        <input type="text" ng-model="v.surprised_guard" class="form-control" placeholder="请输入彩蛋守护时间">
                        <span class="input-group-addon">小时</span>
                    </div>
                </td>
                <td>
                    <button class="btn btn-red" ng-click="function.delete_info(v.id);">删除</button>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="box box-info">
            <div class="form-group col-sm-12">
                <div class="list_pages"></div>
                <button style="text-align: center" class="btn btn-primary" ng-click="function.add_grade();">更新</button>
            </div>
        </div>
    </div>
    <div class="box box-info col-sm-12" ng-show="data.empty_show">
        <div class='panel panel-default'>
            <div class='panel-body' style='text-align: center;padding:30px;'>
                暂时没有任何等级!
            </div>
        </div>
    </div>
</div>

{template '_footer'}