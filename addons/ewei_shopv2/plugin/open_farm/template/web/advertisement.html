{template '_header'}
<script src="https://cdn.bootcss.com/angular.js/1.6.9/angular.min.js"></script>
<script src="{MODULE_URL}/plugin/open_farm/static/web/js/base.js"></script>
<script src="{MODULE_URL}/plugin/open_farm/static/web/js/advertisement.js"></script>
<div class="page-header">
    当前位置：<span class="text-primary">侧边栏按钮设置</span>
</div>
<div class="page-content" ng-app="advertisement_app" ng-controller="advertisement_controller">
    <div ng-show="data.list_show">
        <div class="page-toolbar row m-b-sm m-t-sm">
            <div class="col-sm-4">
                <a class='btn btn-primary btn-sm' ng-click="function.add_advertisement_show();"><i class='fa fa-plus'></i> 添加按钮</a>
            </div>
        </div>
        <div ng-show="data.table_show">
            <table class="table table-responsive table-hover">
                <thead class="navbar-inner">
                <tr>
                    <th>名称</th>
                    <th>图标</th>
                    <th>跳转链接</th>
                    <th style="width: 8%">操作</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="(k, v) in data.advertisement_list.data">
                    <td ng-bind="v.name"></td>
                    <td><img src='{{v.show_logo}}' style='width:30px;height:30px;padding:1px;border:1px solid #ccc' />{{v.log}}</td>
                    <td ng-bind="v.url"></td>
                    <td style="text-align:left;">
                        <a class="btn btn-default btn-sm" ng-click="function.edit_advertisement_show(this);">
                            <i class='fa fa-edit'></i>
                        </a>
                        <a ng-click="function.delete_advertisement(v.id);"class="btn btn-default btn-sm">
                            <i class="fa fa-trash"></i>
                        </a>
                    </td>
                </tr>
                </tbody>

            </table>
            <div class="list_pages"></div>
        </div>
        <div ng-show="data.empty_show">
            <div class='panel panel-default'>
                <div class='panel-body' style='text-align: center;padding:30px;'>
                    暂时没有添加任何按钮!
                </div>
            </div>
        </div>
    </div>

    <div ng-show="data.add_show">
        <div class="page-toolbar row m-b-sm m-t-sm">
            <div class="col-sm-4">
                <a class='btn btn-primary btn-sm' ng-click="function.add_advertisement_show();"><i class='fa fa-plus'></i> 添加按钮</a>
            </div>
        </div>
        <div class="box box-info">
            <form class="form-horizontal">
                <div class="box-body">

                    <div>
                        <div class="form-group">
                            <label  class="col-sm-2 control-label">名称</label>
                            <div class="col-sm-10">
                                <input  type="text" class="form-control"  ng-model="data.advertisement_info.name" placeholder="按钮名称">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="logo" class="col-sm-2 control-label">广告图标</label>
                            <div class="col-sm-10">
                                <div class="input-group">
                                    <input type="text" name="logo" value="" class="form-control" autocomplete="off" filename="icon.jpg" url="{{data.advertisement_info.logo}}" ng-model="data.advertisement_info.logo">
                                    <span class="input-group-btn">
                                <button id="logo" class="btn btn-default" type="button" onclick="showImageDialog(this);">选择图片</button>
                            </span>
                                </div>
                                <div class="input-group" style="margin-top:.5em;">
                                    <img ng-src="{{data.advertisement_info.show_logo}}" onerror="this.src='./resource/images/nopic.jpg'; this.title='图片未找到.'" class="img-responsive img-thumbnail" width="150">
                                    <em class="close" style="position:absolute; top: 0px; right: -14px;" title="删除这张图片" onclick="deleteImage(this)">×</em>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label  class="col-sm-2 control-label">跳转链接</label>
                            <div class="col-sm-10">
                                <input  type="text" class="form-control" ng-model="data.advertisement_info.url" placeholder="跳转链接">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-12"  >
                    <input type="button" value="提交" style="text-align: center" class="btn btn-primary" ng-click="function.add_advertisement();">
                    <span>
                     <input type="button" name="back" ng-click="function.list_advertisement_show();"  style='margin-left:10px;'value="返回列表" class="btn btn-default" />
                    </span>
                </div>
            </form>
        </div>
    </div>
</div>

{template '_footer'}