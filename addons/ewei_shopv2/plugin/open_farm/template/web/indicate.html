{template '_header'}
<script src="https://cdn.bootcss.com/angular.js/1.6.9/angular.min.js"></script>
<script src="{MODULE_URL}/plugin/open_farm/static/web/js/base.js"></script>
<script src="{MODULE_URL}/plugin/open_farm/static/web/js/indicate.js"></script>
<div class="page-header">
    当前位置：<span class="text-primary">新手指引设置</span>
</div>
<div class="page-content" ng-app="indicate_app" ng-controller="indicate_controller">
    <div>
        <div class="box box-info">
            <form class="form-horizontal">
                <div class="box-body">
                    <div class="form-group">
                        <label for="logo" class="col-sm-2 control-label">图片:</label>
                        <div class="col-sm-7">
                            <div class="input-group">
                                <input type="text" name="image" value="" class="form-control" autocomplete="off" filename="icon.jpg" url="{{data.indicate_info.image}}" ng-model="data.indicate_info.image">
                                <span class="input-group-btn">
                            <button id="logo" class="btn btn-default" type="button" onclick="showImageDialog(this);">选择图片</button>
                        </span>
                            </div>
                            <div class="input-group" style="margin-top:.5em;">
                                <img ng-src="{{data.indicate_info.show_image}}" onerror="this.src='./resource/images/nopic.jpg'; this.title='图片未找到.'" class="img-responsive img-thumbnail" width="150">
                                <em class="close" style="position:absolute; top: 0px; right: -14px;" title="删除这张图片" onclick="deleteImage(this)">×</em>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="describe">内容 :</label>
                        <div class="col-sm-7">
                            <textarea style="height: 80px;" class="form-control" ng-model="data.indicate_info.describe"
                                      id="describe" name="describe"></textarea>
                            <span class="help-block">指导内容</span>
                        </div>
                    </div>
                    <div class="form-group" >
                        <label class="col-sm-2 control-label" for="describe"></label>
                        <input type="button" value="保存" style="text-align: center" class="btn btn-primary" ng-click="function.add_indicate();">
                        <span>
                        <input type="button" value="清空" style="text-align: center" class="btn btn-primary" ng-click="function.empty_indicate();">
                       </span>
                    </div>
                </div>
            </form>
        </div>
        <div ng-show="data.table_show">
            <table class="table table-responsive table-hover">
                <thead class="navbar-inner">
                <tr>
                    <th>指导图片</th>
                    <th>指导描述</th>
                    <th style="width: 8%">操作</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="(k, v) in data.indicate_list.data">
                    <td><img src='{{v.show_image}}' style='width:30px;height:30px;padding:1px;border:1px solid #ccc' />{{v.image}}</td>
                    <td ng-bind="v.describe"></td>
                    <td style="text-align:left;">
                        <a class="btn btn-default btn-sm" ng-click="function.add_indicate_show(this);">
                            <i class='fa fa-edit'></i>
                        </a>
                        <a ng-click="function.delete_indicate(v.id);"class="btn btn-default btn-sm">
                            <i class="fa fa-trash"></i>
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="list_pages"></div>
        </div>
        <div ng-show="data.empty_show">
            <div class='panel panel-default'>
                <div class='panel-body' style='text-align: center;padding:30px;'>
                    暂时没有添加任何指导!
                </div>
            </div>
        </div>
    </div>
</div>
{template '_footer'}